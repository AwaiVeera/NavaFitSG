{"version":3,"mappings":"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","names":["AUTH_STORAGE_KEY","redirectParam","URLSearchParams","window","location","search","get","firebaseApp","firebaseAuth","emailMode","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","redirectAfterAuth","target","href","showStatus","message","variant","statusNode","document","querySelector","textContent","dataset","ensureFirebase","__async","this","initializeApp","Promise","all","__vitePreload","import","getAuth","onAuthStateChanged","signInWithPopup","GoogleAuthProvider","OAuthProvider","signInWithEmailAndPassword","createUserWithEmailAndPassword","__VITE_PRELOAD__","languageCode","providers","google","apple","addScope","user","payload","uid","email","displayName","photoURL","provider","_b","_a","providerData","providerId","timestamp","Date","now","localStorage","setItem","JSON","stringify","persistUser","setTimeout","handleGoogleSignIn","error","console","handleAppleSignIn","handleEmailSubmit","event","preventDefault","getElementById","value","password","addEventListener","googleBtn","appleBtn","emailForm","toggle","label","initEmailModeToggle","stored","getItem","parse","summary","innerHTML","warn","hydrateUserSummary"],"ignoreList":[],"sources":["../../scripts/auth.js"],"sourcesContent":["const AUTH_STORAGE_KEY = 'navafitUser';\nconst redirectParam = new URLSearchParams(window.location.search).get('redirect');\nlet firebaseApp;\nlet firebaseAuth;\nlet emailMode = 'signIn';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDjZaPepgushiuRtEKDX5Pb5wc0pxQ4dEU\",\n  authDomain: \"adenaya-d37da.firebaseapp.com\",\n  projectId: \"adenaya-d37da\",\n  storageBucket: \"adenaya-d37da.firebasestorage.app\",\n  messagingSenderId: \"685300496749\",\n  appId: \"1:685300496749:web:1e48df6eec12424b460264\",\n  measurementId: \"G-JTLFELS7HL\"\n};\n\nfunction persistUser(user) {\n  if (!user) return;\n  const payload = {\n    uid: user.uid,\n    email: user.email,\n    displayName: user.displayName,\n    photoURL: user.photoURL,\n    provider: user.providerData?.[0]?.providerId || 'password',\n    timestamp: Date.now()\n  };\n  localStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(payload));\n}\n\nfunction redirectAfterAuth() {\n  const target = redirectParam || 'index.html';\n  window.location.href = target;\n}\n\nfunction showStatus(message, variant = 'info') {\n  const statusNode = document.querySelector('[data-auth-status]');\n  if (!statusNode) return;\n  statusNode.textContent = message;\n  statusNode.dataset.variant = variant;\n}\n\nasync function ensureFirebase() {\n  if (firebaseApp) return { firebaseAuth };\n  const [{ initializeApp }] = await Promise.all([\n    import('https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js'),\n  ]);\n  const [{ getAuth, onAuthStateChanged, signInWithPopup, GoogleAuthProvider, OAuthProvider, signInWithEmailAndPassword, createUserWithEmailAndPassword }] = await Promise.all([\n    import('https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js')\n  ]);\n\n  firebaseApp = initializeApp(firebaseConfig);\n  firebaseAuth = getAuth(firebaseApp);\n  firebaseAuth.languageCode = 'en';\n\n  const providers = {\n    google: new GoogleAuthProvider(),\n    apple: new OAuthProvider('apple.com')\n  };\n  providers.apple.addScope('email');\n  providers.apple.addScope('name');\n\n  onAuthStateChanged(firebaseAuth, (user) => {\n    if (user) {\n      persistUser(user);\n      showStatus('Authenticated as ' + (user.displayName || user.email), 'success');\n      setTimeout(redirectAfterAuth, 800);\n    }\n  });\n\n  return {\n    firebaseAuth,\n    providers,\n    signInWithPopup,\n    signInWithEmailAndPassword,\n    createUserWithEmailAndPassword\n  };\n}\n\nfunction initEmailModeToggle() {\n  const toggle = document.querySelector('[data-email-mode-toggle]');\n  if (!toggle) return;\n  toggle.addEventListener('click', () => {\n    emailMode = emailMode === 'signIn' ? 'signUp' : 'signIn';\n    toggle.textContent = emailMode === 'signIn' ? 'Need an account? Switch to Sign Up' : 'Already have an account? Sign In';\n    const label = document.querySelector('[data-email-mode-label]');\n    if (label) label.textContent = emailMode === 'signIn' ? 'Sign In with Email' : 'Sign Up with Email';\n  });\n}\n\nasync function handleGoogleSignIn() {\n  try {\n    const { providers, signInWithPopup } = await ensureFirebase();\n    await signInWithPopup(firebaseAuth, providers.google);\n  } catch (error) {\n    console.error('Google auth failed', error);\n    showStatus(error.message || 'Google login failed', 'error');\n  }\n}\n\nasync function handleAppleSignIn() {\n  try {\n    const { providers, signInWithPopup } = await ensureFirebase();\n    await signInWithPopup(firebaseAuth, providers.apple);\n  } catch (error) {\n    console.error('Apple auth failed', error);\n    showStatus(error.message || 'Apple login failed', 'error');\n  }\n}\n\nasync function handleEmailSubmit(event) {\n  event.preventDefault();\n  const email = document.getElementById('emailInput')?.value;\n  const password = document.getElementById('passwordInput')?.value;\n  if (!email || !password) {\n    showStatus('Email and password required', 'error');\n    return;\n  }\n  try {\n    const { signInWithEmailAndPassword, createUserWithEmailAndPassword } = await ensureFirebase();\n    if (emailMode === 'signUp') {\n      await createUserWithEmailAndPassword(firebaseAuth, email, password);\n      showStatus('Account created successfully', 'success');\n    } else {\n      await signInWithEmailAndPassword(firebaseAuth, email, password);\n      showStatus('Welcome back', 'success');\n    }\n  } catch (error) {\n    console.error('Email auth failed', error);\n    showStatus(error.message || 'Authentication failed', 'error');\n  }\n}\n\nfunction hydrateUserSummary() {\n  const stored = localStorage.getItem(AUTH_STORAGE_KEY);\n  if (!stored) return;\n  try {\n    const user = JSON.parse(stored);\n    const summary = document.querySelector('[data-auth-summary]');\n    if (summary) {\n      summary.innerHTML = `<p class=\"text-sm text-gray-400\">Signed in as</p><p class=\"text-lg\">${user.displayName || user.email}</p>`;\n    }\n  } catch (error) {\n    console.warn('Failed to parse stored user', error);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const googleBtn = document.querySelector('[data-auth-google]');\n  const appleBtn = document.querySelector('[data-auth-apple]');\n  const emailForm = document.querySelector('[data-auth-email-form]');\n\n  googleBtn?.addEventListener('click', handleGoogleSignIn);\n  appleBtn?.addEventListener('click', handleAppleSignIn);\n  emailForm?.addEventListener('submit', handleEmailSubmit);\n\n  initEmailModeToggle();\n  hydrateUserSummary();\n});\n"],"file":"assets/login-CwqkenZf.js"}